Comenzi terminal RN

cd D:\Proiect-RN-Generare-piese-CAD-main

.\.venv312\Scripts\Activate.ps1

-----Dataset creation-----

-Json generation using the templates

python src\preprocessing\generate_valid_sweep.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --out_dir "data/raw/generated_sweep_valid" `
  --n 2000 `
  --seed 42 `
  --families all `
  --validate 1

-Batch generation
 
-Train

python src\data_acquisition\batch_generate_parts.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --generator "src\data_acquisition\generate_sldprt_from_json_dim_v3_6_1.py" `
  --jsonl "data\raw\generated_sweep_valid\shaft.jsonl" `
  --family shaft `
  --split train `
  --count 1600 `
  --start_index 0 `
  --visible 0 `
  --verbose 0 `
  --strict 1

(For the other parts, change family argument to desired part. To change the amount generated, change count argument,
to change train/validation/test, change split argument)

-Prompt generation

python src\preprocessing\generate_prompt_variants.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --in_dir "data/raw/generated_sweep_valid" `
  --out_dir "data/raw/generated_prompts" `
  --families all `
  --variants_per_record 4 `
  --seed 42 `
  --pcd_mode radius

-----Data processing----

-Process manifest

python src\preprocessing\build_processed_from_manifests.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --source_split train `
  --train_n 1600 `
  --val_n 200 `
  --test_n 200 `
  --seed 42

-Process all

python src\preprocessing\build_processed_all_splits.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main"

-----Train AI-----

python .\src\neural_network\train_llm_json_with_metrics.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --model_name gpt2 `
  --run_name json_sft_gpt2_with_metrics `
  --seed 42 `
  --epochs 2 `
  --train_batch_size 1 `
  --eval_batch_size 1 `
  --grad_accum 16 `
  --max_length 192 `
  --lr 5e-5 `
  --use_lora 0 `
  --lora_r 16 `
  --lora_alpha 32 `
  --lora_dropout 0.05 `
  --fp16 1 `
  --bf16 0 `
  --max_steps -1 `
  --eval_sample_size 64 `
  --eval_max_new_tokens 160 `
  --eval_abs_tol 0.5 `
  --eval_rel_tol 0.0
  -----Rebuild Part-----

-Generate output

python src\neural_network\infer_json.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --model_dir "D:\Proiect-RN-Generare-piese-CAD-main\runs\json_sft_distilgpt2_p3200\final" `
  --prompt "Create a shaft with outer diameter 65mm, length 350mm, bore diameter 35mm, chamfer length 2mm, chamfer angle 45 degrees." `
  --out_jsonl "out\predicted_one.jsonl"

-Build part

python src\data_acquisition\generate_sldprt_from_json_dim_v3_6_1.py `
  --repo_root "D:\Proiect-RN-Generare-piese-CAD-main" `
  --jsonl "out\predicted_one.jsonl" `
  --index 0 `
  --out_dir "out" `
  --visible 1 `
  --verbose 1 `
  --strict 0

 --------Accuracy evaluation---------

python .\src\data_acquisition\eval_accuracy.py `
  --model_dir ".\runs\json_sft_gpt2_with_metrics_v2\final" `
  --data_jsonl ".\data\processed\test.jsonl" `
  --max_samples 200 `
  --chosen_abs_tol 0.5 `
  --angle_tol_deg 1.0 `
  --print_every 25

---------UI Start---------

cd D:\Proiect-RN-Generare-piese-CAD-main\src\app
streamlit run .\cad_ui.py 